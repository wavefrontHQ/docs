---
title: Install and Manage Wavefront Proxies
tags: [proxies, best practice]
sidebar: doc_sidebar
permalink: proxies_installing.html
summary: Learn how to install and manage Wavefront proxies.
---
Tanzu Observability by Wavefront offers several [deployment options](proxies.html#proxy-deployment-options). During development, a single proxy is often sufficient for all data sources. In production, place a team of proxies behind a load balancer.

In most cases, a Wavefront proxy must be running in your installation before metrics begin streaming to the Wavefront service from a host or application.

## Proxy Host Requirements

- Internet access - run `timeout 3s curl -fIsS <wavefront_api_url>` from the host and make sure you get a response and not a timeout.
- Networking -
  - By default, the proxy uses port 2878. Make sure this port is reachable from other machines on your network. You can change this default separately for different types of data (metrics, histograms, traces, etc.) in the [proxy configuration file](proxies_configuring.html). For example, use `traceListenerPorts` to specify where to listen to trace data.
  - For egress, ensure that port 443 is available.
- Memory - The proxy does not use a lot of CPU, memory, or storage. However, we recommend running the proxy on a host with at least 4GB of free memory.
- CPU - A standalone proxy can easily handle up to 40K PPS (points per second). If you're sending more, use [multiple proxies behind a load balancer](proxies.html#production-environment-team-of-proxies--load-balancer).
- Operating system - Wavefront proxy is a Java application and can run on operating systems supported by Java. Java 8 or later is required, the latest version of Java is recommended.
- Other - Maven

<a name="single"></a>

## Install a Proxy

Many users install a proxy when they set up an integration. You can also install a proxy from the UI or perform a scripted installation.

{% include note.html content="In development, many customers use only one proxy that receives data from many applications and sends those data to the Wavefront service. In production, consider using two proxies behind a load balancer. See [Proxy Deployment Options](proxies.html#proxy-deployment-options)." %}

### Install a Proxy from the UI

To install and run a proxy:
<table style="width: 100%;">
<tbody>
<tr>
<td width="60%">
<ol><li>Log in to your Wavefront instance and select <strong>Browse &gt; Proxies</strong>. </li>
<li>Select <strong>Add &gt; New Proxy</strong>.</li>
<li>On the right, click the tab for your operating system and follow the steps on screen.  </li>
</ol>
The screenshot on the right shows the steps for installing a Windows proxy. </td>
<td width="40%"><img src="/images/add_proxy.png" alt="screenshot of add proxy flow in GUI"></td>
</tr>
</tbody>
</table>

The proxy starts listening on port 2878. You can customize listener ports with the [proxy configuration file](proxies_configuring.html).

### Scripted Proxy Installation

You can use steps in an integration or perform a package install.

* **Integration**. Select **Browse > Integrations** and find the host integration (Mac, Windows, or Linux). The **Setup** tab give the installation script. For Mac and Linux, you can install the proxy with or without the Telegraf agent.
* **Package Install** To perform a **package install**, see [Installing a Proxy manually](proxies_manual_install.html).

<a id="restart"></a>
## Manage Proxy Services

After installing a proxy, you can start and stop the proxy service, check service status, and view the logs that are generated by the service. See [Logging](proxies_configuring.html#logging) for customizing your proxy, including its log configuration options.

<a id="starting-and-stopping-a-proxy"></a>
### Start and Stop a Proxy

Run the following commands on the proxy host:

<table style="width: 100%;">
<tbody>
<thead>
<tr><th width="20%">OS</th><th width="80%">Instructions</th></tr>
</thead>
<tr><td>Linux</td>
<td><code>service wavefront-proxy &lbrack;start | stop | restart&rbrack;</code></td></tr>
<tr>
<td markdown="span">Windows</td>
<td><code>
cd C:\Program Files (x86)\Wavefront\bin
.\nssm.exe [start | stop] WavefrontProxy
</code> </td></tr>

<tr><td>Mac OS</td>
<td><code>brew services [start | stop | restart] wfproxy</code></td></tr>
<tr><td>Docker</td>
<td><code>docker [start | stop ] &lt;proxy_container_id&gt;</code></td>
</tr>
</tbody>
</table>

### Check Proxy Service Status

To check if the proxy is running, run the following commands on the proxy host:

<table style="width: 100%;">
<tbody>
<thead>
<tr><th width="20%">OS</th><th width="80%">Instructions</th></tr>
</thead>
<tr><td>Linux</td>
<td><code>service wavefront-proxy status</code>
<p>Proxy log at <code>/var/log/wavefront/wavefront.log</code>.</p></td></tr>
<tr>
<td markdown="span">Windows</td>
<td><code>
cd C:\Program Files (x86)\Wavefront\bin
.\nssm.exe status WavefrontProxy</code>
<p>Proxy log at <code>Program Files (x86)\Wavefront\wavefront.log</code>.</p></td></tr>
<tr><td>Mac OS</td>
<td><code>brew services list</code>
<p>Proxy log at <code>/usr/local/var/log/wavefront/wavefront.log</code></p></td></tr>
</tbody>
</table>

<!---
- Linux

  ```shell
  $ service wavefront-proxy status
  ```
  You can view the proxy log at `/var/log/wavefront/wavefront.log`.
- Mac

  ```shell
  $ brew services list
  ```
  You can view the proxy log at `/usr/local/var/log/wavefront/wavefront.log`.

- Windows

  ```
  $ cd C:\Program Files (x86)\Wavefront\bin
  $ .\nssm.exe status WavefrontProxy
  ```
  You can view the proxy log at `Program Files (x86)\Wavefront\wavefront.log`.

- Docker

  ```
  $ docker ps
  ```
  To view the proxy log, run `docker logs <proxy_container_id>`.
--->

### Test a Proxy

You can test that a proxy is receiving and sending data as follows:

1. Send data by running the following command:

   ```shell
echo -e "test.metric 1 source=test_host\n" | nc <wavefront_proxy_address> 2878
   ```
   where `<wavefront_proxy_address>` is the address of your Wavefront proxy.
1. Log in to Wavefront instance and select **Browse > Metrics**.
1. In the Metrics field, type `test.metric`.
1. Click `test.metric` to display a chart of the metric.

### Upgrade a Proxy

New proxy versions with new features are released frequently. See the [Wavefront proxy github page](https://github.com/wavefrontHQ/java/releases) for details.

{% include note.html content="Upgrading a proxy with a large proxy queue is not a good idea. The proxy will queue your data until the upgrade is complete, but the short-term result can be an even bigger proxy queue." %}

#### Upgrade from the UI

To upgrade from the UI, select **Browse > Proxies > Add New Proxy**. If an older version of the proxy exists, this process replaces it.

{% include note.html content="On Windows systems, you might have to uninstall the existing proxy first." %}

#### Upgrade from the Command Line

For Linux and Mac OS, can also upgrade a proxy from the command line as follows:

<table style="width: 100%;">
<tbody>
<thead>
<tr><th width="20%">OS</th><th width="80%">Instructions</th></tr>
</thead>
<tr><td>Linux</td>
<td><code>sudo apt-get update && sudo apt-get install wavefront-proxy</code></td></tr>
<tr>
<td markdown="span">Linux (RPM)</td>
<td><code>yum update wavefront-proxy
</code></td></tr>
<tr><td>Mac OS</td>
<td><code>brew update && brew upgrade wfproxy</code></td></tr>
</tbody>
</table>

#### Upgrade a Proxy on Docker

On Docker, you don't explicitly update the proxy version, but stop the proxy and then start the new version.

If you use a volume for the proxy buffer (queue) and you update from a version before 7.2 to 7.2 or later, permissions change:
* For earlier versions of the proxy, the proxy ran as `root:root`.
* Starting with version 7.2, the proxy runs as `wavefront:wavefront`.


{% include warning.html content="Ensure that either the proxy buffer (queue) is empty, or that the files on the buffer directory (volume) are owned by a user with id `1000` and group `2000` (which will translate to user `wavefront` on the docker image)." %}


If you performed the update and data are left in the proxy buffer, follow the steps in [Proxy Troubleshooting](proxies_troubleshooting.html#remove-queued-data-at-the-proxy).

### Uninstall a Proxy

When you upgrade a proxy, we uninstall the older version for you. You can also uninstall a proxy explicitly:

<table style="width: 100%;">
<tbody>
<thead>
<tr><th width="20%">OS</th><th width="80%">Instructions</th></tr>
</thead>
<tr>
<td markdown="span">Windows</td>
<td>The precise process depends on the version of Windows you're using. You follow the process for uninstalling programs. <ol><li>Click <strong>Start</strong>, and then click <strong>Control Panel</strong>.</li>
<li>Under Programs, click <strong>Uninstall a program</strong>.</li>
<li>Select <strong>Telegraf</strong> and click <strong>Uninstall</strong> at the top.</li>
<li>Select <strong>Wavefront Proxy</strong> and click <strong>Uninstall</strong> at the top.</li></ol></td></tr>
<tr><td>Linux</td>
<td><code>sudo apt-get remove wavefront-proxy
sudo apt-get remove telegraf</code></td></tr>
<tr><td>Linux (RPM)</td>
<td><code>sudo yum remove wavefront-proxy
sudo yum remove telegraf</code></td></tr>
<tr><td>Mac OS</td>
<td markdown="span">`bash -c "$(curl -s https://raw.githubusercontent.com/wavefrontHQ/homebrew-wavefront/master/sh/uninstall.sh)" `</td></tr>
</tbody>
</table>

## See Also

Advanced users can export proxy data to a file and perform other customizations.

Here's some additional information in the doc:
* [Run a Proxy in a Container](proxies_container.html) shows how to install the proxy and Telegraf in a Docker container.
* [Export Data Queued at the Proxy](proxies_troubleshooting.html#manage-the-proxy-queue)
* [Install a Proxy in Non-Default Environments](proxies_manual_install.html)
* Use the [proxy configuration file](proxies_configuring.html) to customize proxy behavior for metrics, histograms, and traces.

Here's a KB article for TLS connections between two proxies:
* [How to enable TLS connection between two Wavefront Proxies](https://help.wavefront.com/hc/en-us/articles/4408500702100-How-to-enable-TLS-connection-between-two-Wavefront-Proxies)
